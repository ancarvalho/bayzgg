import { GetStaticProps } from "next"
import { CalendarDay } from "../components/calendar/CalendarDay"
import { calendarData } from "../data"
import { EventModel } from "../models/EventModel"
import { CalendarIcon } from '@heroicons/react/outline';

type CalendarProps = {
  events: EventModel[]
}

const Calendar = ({ events }: CalendarProps) => {
  type groupByDateProps = {
    [key: string]: EventModel[]
  }

  function groupByDate(events: EventModel[]): groupByDateProps {
    events.sort((prevEvent, event) => prevEvent.date.localeCompare(event.date))
    return events
      .reduce((previusEvent, event) => {
        let k = new Date(event.date).toLocaleDateString()
        return Object.assign(previusEvent, { [k]: (previusEvent[k] || []).concat(event) })
      }, {})
  }

  const groupedData: groupByDateProps = groupByDate(events)

  return (
    <>
      <div className="BackgroundTheme">
        <div className="py-4 max-w-[1136px] mx-auto">
          <div className="flex flex-rows items-center pt-4 pb-8 pl-4">
            <div className="AirdropBgTheme rounded-md p-1">
              <svg
                className="h-8 w-auto SvgTheme m-2"
                width="1000"
                height="1000"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 1000 1000"
              >

                <path
                  d="m929.8 174c-0.1-49.9-28.1-75-77.6-73.7-16.8 0.4-20.5 7-20.1 21.9 0.7 25.2 1.1 50.5-0.2 75.7-2 40.8-26.2 66.2-66.6 69.4-21.4 1.7-43.1 1.6-64.4 0.1-43.4-3-67.7-29.3-68.7-72.9-0.5-24.3-0.8-48.6 0.1-72.9 0.6-15.6-4.7-21.2-20.7-21.1-74.8 0.7-149.6 0.7-224.3 0-17-0.2-20.3 7.1-19.8 21.8 0.8 25.2 0.7 50.5 0.1 75.7-0.9 38.1-22.9 64-60.7 68.3-23.1 2.7-46.7 2.5-70 1.1-42.5-2.5-66.2-27.7-67.7-70.5-0.8-25.2-0.9-50.5 0-75.7 0.6-15.9-5.6-20.5-21.2-20.8-50.9-1.1-77.9 24.4-77.9 76.4-0.1 248.7-0.1 497.3 0 746 0 53.6 23.1 77.1 76.6 77.2 235.6 0.2 471.1 0.2 706.7 0 53.9 0 76.4-23 76.4-77.1 0.2-124.3 0-248.7 0-373 0.1-125.4 0.3-250.7 0-375.9zm-761.8 176.8c-0.1-13 5.5-18.2 18.5-18.2 55 0.3 110 0.3 164.9 0.1 11.8 0 16.4 4.9 16.3 16.8-0.4 44.7-0.5 89.5 0.1 134.2 0.2 14.8-7.8 16.5-19.4 16.4-27-0.3-54-0.1-81.1-0.1-27 0-54.1-0.4-81.1 0.2-13.1 0.3-18.4-4.7-18.3-17.9 0.5-43.9 0.4-87.7 0.1-131.5zm199.9 531c0.2 14.3-4.5 20-19.1 19.8-53.1-0.5-106.2-0.5-159.3 0-15.5 0.2-21.8-5.2-21.6-21 0.6-42.9 0.5-85.7 0.1-128.6-0.1-13.1 5.1-18.3 18.2-18 27 0.6 54 0.2 81.1 0.2 27 0 54.1 0.5 81.1-0.2 14.2-0.4 19.8 4.4 19.6 19.2-0.8 42.9-0.7 85.8-0.1 128.6zm-22.6-180.5c-26.1-1.1-52.3-0.3-78.5-0.3-25.2 0-50.5-0.8-75.7 0.3-16.4 0.7-23.7-3.8-23.3-21.7 0.9-42 0.8-84.1 0.1-126.2-0.3-16.2 6.3-20.7 21.6-20.5 52.3 0.7 104.7 1 157-0.1 18.2-0.4 21.8 7 21.5 23.1-0.8 41.1-1.1 82.3 0.1 123.4 0.4 17.8-6.2 22.7-22.8 22zm74.2-368.6c53.3 0.3 106.6 0.4 159.9-0.1 14.4-0.1 19.9 5.2 19.7 19.7-0.6 43-0.7 86 0 129 0.2 15.3-6.6 19.1-20.3 18.8-27.1-0.6-54.2-0.2-81.3-0.2-26.2 0-52.4-0.4-78.5 0.2-13.2 0.3-18.1-4.7-18-18 0.5-43.9 0.5-87.9 0-131.8-0.2-13.8 5.9-17.7 18.5-17.6zm-18.6 219.9c-0.2-14.2 4.3-19.8 19.2-19.6 53.2 0.7 106.4 0.6 159.7 0 14.8-0.2 19.5 5.5 19.3 19.7-0.5 42.9-0.5 85.9 0 128.9 0.2 14.3-4.7 20-19.4 19.6-27.1-0.8-54.1-0.2-81.2-0.2-25.2 0-50.4-0.5-75.6 0.2-14.6 0.5-22.4-2.6-22-19.7 0.9-42.9 0.6-85.9 0-128.9zm198.4 326.6c0.4 17.2-5.9 22.8-22.8 22.6-51.4-0.8-102.8-0.6-154.3-0.1-15.3 0.2-21.8-4.3-21.4-20.7 0.9-42.1 0.9-84.1 0-126.2-0.3-16 5.4-21.4 21-20.8 26.1 0.9 52.3 0.3 78.5 0.3 25.2 0 50.5 0.7 75.7-0.3 16.4-0.6 23.6 4 23.2 21.8-1 41.1-0.9 82.3 0.1 123.4zm32.6-526.7c-0.2-14.3 4.8-20.1 19.4-19.9 53.2 0.5 106.3 0.5 159.5 0 15-0.1 22.1 4.5 21.8 20.8-0.7 42.9-0.5 85.8-0.1 128.7 0.1 13.2-5 18.3-18.2 18-28-0.5-56-0.2-83.9-0.2-25.2 0-50.4-0.7-75.5 0.3-16.3 0.6-23.5-4-23-21.8 0.9-41.9 0.6-83.9 0-125.9zm200.5 531.1c0.1 13.5-6.3 17.9-18.8 17.9-55-0.2-110.1-0.2-165.1 0-11.8 0-16.6-5.1-16.5-16.9 0.3-44.8 0.4-89.5 0-134.3-0.1-14.9 8.6-16.2 19.9-16.1 27 0.2 54.1 0.1 81.1 0.1s54.1 0.4 81.1-0.1c13.1-0.3 18.4 4.7 18.2 18-0.3 43.7-0.3 87.6 0.1 131.4zm-23.1-182.4c-26.1-1-52.2-0.3-78.3-0.3-27 0-54.1-0.5-81.1 0.1-13.2 0.3-18.2-4.8-18-18 0.4-43.8 0.6-87.6-0.1-131.4-0.2-15.3 6.6-18.8 20.3-18.7 53.1 0.5 106.2 0.6 159.3-0.1 15.8-0.2 21.4 5.2 21.1 20.9-0.7 41.9-0.9 83.9 0.1 125.8 0.5 18.2-7.2 22.3-23.3 21.7zm-537.2-467.9c33.9-2.3 60.2-29.3 61.9-64.5 0.8-17.7 0.1-35.5 0.1-53.2 0-16.8 0.6-33.6-0.1-50.4-1.6-35.6-27.3-62.4-61.3-65-33.7-2.5-64.2 20.7-68.8 56.2-5.2 39.8-5 80.3-0.1 120.1 4.3 35.5 34.7 59 68.3 56.8zm458 0.1c36.4 1.4 65.8-27 68.4-67.1 1-15.8 0.2-31.7 0.2-47.6h-0.1c0-17.7 1.1-35.6-0.2-53.2-2.9-38.4-31.8-65.9-67.2-65.4-35.5 0.5-64 28.7-65.4 67.1-1.2 32.6-1.1 65.4 0 98 1.2 38.8 28.4 66.8 64.3 68.2z" />
              </svg>
            </div>

            <p className="text-xl CardTextTheme font-bold ml-2 AirdropBgTheme rounded-md p-2">
              Calendario
            </p>

          </div>
          {Object.entries(groupedData).map(({ "0": key, "1": value }) =>
            <CalendarDay key={key} date={key} events={value} />
          )}
        </div>
      </div>
    </>
  )
}

export const getStaticProps: GetStaticProps = async () => {
  const events: EventModel[] = calendarData



  return {
    props: {
      events
    }
  }
}


export default Calendar